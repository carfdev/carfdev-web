---
import ProjectPage from "@/components/pages/project/ProjectPage.astro";
import { projectUi } from "@/i18n/project-ui";
import { useTranslations } from "@/i18n/index-ui";

export async function getStaticPaths() {
  return useTranslations("en")("portfolio").items.map((item) => ({
    params: { id: item.url.split("/")[2] },
  }));
}

const idRaw = Astro.params.id;
const id =
  idRaw in projectUi["en"]
    ? (idRaw as keyof (typeof projectUi)["en"])
    : undefined;

if (!id) {
  throw new Error(`Project ID "${idRaw}" don't exist`);
}
---

<ProjectPage projectId={id} />
